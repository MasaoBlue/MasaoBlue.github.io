(function(e){function t(t){for(var a,o,c=t[0],s=t[1],u=t[2],v=0,d=[];v<c.length;v++)o=c[v],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);l&&l(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,c=1;c<n.length;c++){var s=n[c];0!==r[s]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={app:0},i=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=s;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"43ee":function(e,t,n){"use strict";var a=n("d939"),r=n.n(a);r.a},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-app-bar",{staticClass:"d-flex align-stretch justify-center mx-0 px-0",attrs:{app:"",color:"primary",dark:""}},[n("v-toolbar-title",{staticClass:"d-flex align-stretch justify-center",attrs:{height:"100%",width:"100%"}},[e._v("Black or White")])],1),n("v-content",[n("router-view")],1)],1)},i=[],o=n("2877"),c=n("6544"),s=n.n(c),u=n("7496"),l=n("40dc"),v=n("a75b"),d=n("2a7f"),p={},f=Object(o["a"])(p,r,i,!1,null,null,null),h=f.exports;s()(f,{VApp:u["a"],VAppBar:l["a"],VContent:v["a"],VToolbarTitle:d["a"]});var g=n("9483");Object(g["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var m=n("8c4f"),b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home text-center"},[e.isSelectedImage?e._e():n("ImageSelect",{attrs:{transition:"fade-transition"},on:{imageSelected:e.imageSelected}}),e.isSelectedImage?n("JudgementResult",{attrs:{imageFile:e.imageFile},on:{judgeCompleted:e.judgeCompleted,retry:e.retry}}):e._e(),n("v-overlay",{attrs:{value:e.isProcessing}},[n("v-progress-circular",{attrs:{size:70,width:7,color:"secondary",indeterminate:""}})],1)],1)},y=[],w=n("d4ec"),C=n("bee2"),j=n("99de"),O=n("7e84"),k=n("262e"),S=n("9ab4"),_=n("2fe1"),x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"image-select text-center"},[n("v-file-input",{attrs:{placeholder:"Select an image",accept:"image/*"},on:{change:e.selectedImage}}),n("v-btn",{attrs:{large:"",color:"primary",disabled:!e.openCvLoaded||!e.isSelectedImage},on:{click:e.judge}},[e._v("Judgment")])],1)},I=[],R=(n("96cf"),n("1da1")),P=function(e){function t(){var e;return Object(w["a"])(this,t),e=Object(j["a"])(this,Object(O["a"])(t).apply(this,arguments)),e.openCvLoaded=!1,e.isSelectedImage=!1,e}return Object(k["a"])(t,e),Object(C["a"])(t,[{key:"created",value:function(){var e=this;window.openCvLoadPromise.then((function(){e.openCvLoaded=!0}))}},{key:"selectedImage",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.imageFile=t,this.isSelectedImage=!!t;case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"judge",value:function(){this.$emit("imageSelected",this.imageFile)}}]),t}(a["a"]);P=S["a"]([Object(_["b"])({})],P);var A=P,V=A,F=n("8336"),$=n("23a7"),B=Object(o["a"])(V,x,I,!1,null,null,null),L=B.exports;s()(B,{VBtn:F["a"],VFileInput:$["a"]});var M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"judgment-result text-center py-3"},[n("canvas",{ref:"inputCanvas",staticClass:"d-none"}),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isCompleted,expression:"isCompleted"}]},[n("canvas",{ref:"outputCanvas"}),n("div",[n("span",[e._v("This image is...")]),n("transition",{attrs:{name:"delay-fade"}},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.isCompleted,expression:"isCompleted"}],staticClass:"display-3"},[e._v(e._s(e.result))])]),n("span")],1),n("v-btn",{attrs:{large:"",color:"secondary"},on:{click:e.retry}},[e._v("retry")])],1)])],1)},E=[],T=(n("d3b7"),n("ac1f"),n("3ca3"),n("1276"),n("159b"),n("ddb0"),n("2b3d"),n("60a3")),G=function(e){function t(){var e;return Object(w["a"])(this,t),e=Object(j["a"])(this,Object(O["a"])(t).apply(this,arguments)),e.isCompleted=!1,e.result="",e}return Object(k["a"])(t,e),Object(C["a"])(t,[{key:"mounted",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.inputCanvas=this.$refs.inputCanvas,this.outputCanvas=this.$refs.outputCanvas,e.next=4,this.drawInputImage(this.imageFile);case 4:this.convertGreyScale(),t=this.calcAverage(),setTimeout((function(){n.result=n.judge(t),n.isCompleted=!0,n.$emit("judgeCompleted")}),1e3);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"drawInputImage",value:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){if(n.inputCanvas&&n.outputCanvas){var r=n.inputCanvas.getContext("2d"),i=new Image;i.onload=function(){n.inputCanvas&&n.outputCanvas&&(n.inputCanvas.width=n.outputCanvas.width=i.width,n.inputCanvas.height=n.outputCanvas.height=i.height,r.drawImage(i,0,0,i.width,i.height),e())},i.src=URL.createObjectURL(t)}})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"convertGreyScale",value:function(){var e=cv.imread(this.inputCanvas),t=new cv.Mat;cv.cvtColor(e,t,cv.COLOR_RGBA2GRAY),cv.imshow(this.outputCanvas,t),e.delete(),t.delete()}},{key:"calcAverage",value:function(){var e=cv.imread(this.outputCanvas),t=new cv.Mat,n=new cv.Size(1,1);return cv.resize(e,t,n,0,0,cv.INTER_AREA),cv.cvtColor(t,t,cv.COLOR_BGR2HSV),t.data[2]}},{key:"judge",value:function(e){var t=cv.imread(this.outputCanvas),n=new cv.Mat;cv.cvtColor(t,n,cv.COLOR_BGR2HSV);var a=new cv.MatVector;cv.split(n,a);var r=a.get(2),i={black:new Array,white:new Array};r.data.forEach((function(t){var n=Math.pow(e-t,2);t>e?i.white.push(n):t<e&&i.black.push(n)}));var o=function(e){return e.reduce((function(e,t){return e+t}),0)/e.length},c=o(i.black),s=o(i.white);return c>s?"Black":c<s?"White":"Gray"}},{key:"average",value:function(e){return e.reduce((function(e,t){return e+t}),0)/e.length}},{key:"retry",value:function(){this.$emit("retry")}}]),t}(a["a"]);S["a"]([Object(T["a"])()],G.prototype,"imageFile",void 0),G=S["a"]([Object(_["b"])({})],G);var N=G,J=N,z=(n("43ee"),Object(o["a"])(J,M,E,!1,null,"68059e91",null)),H=z.exports;s()(z,{VBtn:F["a"]});var U=function(e){function t(){var e;return Object(w["a"])(this,t),e=Object(j["a"])(this,Object(O["a"])(t).apply(this,arguments)),e.isSelectedImage=!1,e.imageFile=void 0,e.isProcessing=!1,e}return Object(k["a"])(t,e),Object(C["a"])(t,[{key:"imageSelected",value:function(e){this.isProcessing=!0,this.imageFile=e,this.isSelectedImage=!0}},{key:"judgeCompleted",value:function(){this.isProcessing=!1}},{key:"retry",value:function(){this.isSelectedImage=!1}}]),t}(a["a"]);U=S["a"]([Object(_["b"])({components:{ImageSelect:L,JudgementResult:H}})],U);var W=U,q=W,Y=n("a797"),D=n("490a"),K=Object(o["a"])(q,b,y,!1,null,null,null),Q=K.exports;s()(K,{VOverlay:Y["a"],VProgressCircular:D["a"]}),a["a"].use(m["a"]);var X=[{path:"/",name:"home",component:Q}],Z=new m["a"]({mode:"hash",base:"",routes:X}),ee=Z,te=n("f309");a["a"].use(te["a"]);var ne=new te["a"]({theme:{themes:{light:{primary:"#333333"}}}});a["a"].config.productionTip=!1,new a["a"]({router:ee,vuetify:ne,render:function(e){return e(h)}}).$mount("#app")},d939:function(e,t,n){}});
//# sourceMappingURL=app.49d2393d.js.map