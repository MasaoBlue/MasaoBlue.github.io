(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[482],{75517:function(e,n,r){"use strict";r(30467);var t=r(55673),a=(r(54277),r(74048)),i=r(85893),o=(r(35797),r(64749)),u=(r(58136),r(5789)),c=(r(89858),r(51024)),s=r(76570),d=r(67294),l=r(51148),f=r(39399),x=r(74462),m=r(32107),p=r.n(m),h="all";n.Z=function(e){var n=e.onKeywordChange,r=e.onPrefectureChange,m=e.onVersionChange,v=e.enableRekidai,g=void 0===v||v,j=e.enableAllPrefecture,w=void 0===j||j,k=(0,d.useState)("0"),N=k[0],y=k[1],b=(0,d.useState)(g?h:"28"),C=b[0],R=b[1],_=(0,d.useState)(""),I=_[0],S=_[1];(0,l.Z)(n,200,[I]);return(0,d.useEffect)((function(){m(C)}),[m,C]),(0,d.useEffect)((function(){null===r||void 0===r||r(N)}),[r,N]),(0,i.jsxs)(t.Z,{justify:"space-between",children:[(0,i.jsx)(u.Z,{children:(0,i.jsx)(c.Z,{placeholder:"search by title",prefix:(0,i.jsx)(s.Z,{}),onInput:function(e){S(e.target.value)},value:I})}),(0,i.jsx)(u.Z,{children:(0,i.jsxs)(a.default,{children:[r&&(0,i.jsxs)(o.default,{value:N,className:p().prefectureSelect,onChange:function(e){y(e),null===r||void 0===r||r(e)},children:[w&&(0,i.jsx)(o.default.Option,{value:h,children:"\u5168\u90fd\u9053\u5e9c\u770c"},h),f.v_.map((function(e,n){return(0,i.jsx)(o.default.Option,{value:"".concat(n),disabled:n>55,children:"".concat(n,".").concat(e).concat(n>55?"(\u6e96\u5099\u4e2d)":"")},e)}))]}),(0,i.jsx)(o.default,{value:C,className:p().versionSelect,onChange:function(e){R(e)},children:(0,i.jsxs)(o.default.OptGroup,{label:"\u516c\u5f0f",children:[g&&(0,i.jsx)(o.default.Option,{value:h,children:"\u6b74\u4ee3(SPADA-BISTROVER)"},h),!r&&[x._L[x._L.length-1]].reverse().map((function(e){var n=e.name,r=e.num;return(0,i.jsx)(o.default.Option,{value:"".concat(r),children:"".concat(r,".").concat(n)},n)}))]})})]})})]})}},74897:function(e,n,r){"use strict";r.d(n,{z:function(){return Z}});r(15144);var t=r(2307),a=r(85893),i=r(809),o=r.n(i),u=r(92447),c=(r(92015),r(4863)),s=(r(23461),r(53740)),d=r(32869),l=r(7728),f=(r(30467),r(55673)),x=(r(58136),r(5789)),m=(r(92871),r(74806)),p=r(67294),h=r(42108),v=r.n(h),g=function(e){return function(n){return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:n<100?"".concat(n,"%"):"Done"}),(0,a.jsx)(s.Z.Text,{className:v().progressTitle,children:e})]})}},j=function(e){var n=e.downloadProgress,r=e.calculationProgress;return(0,a.jsxs)(f.Z,{gutter:[32,0],justify:"center",children:[(0,a.jsx)(x.Z,{children:(0,a.jsx)(m.Z,{type:"circle",percent:n,format:g("download")})}),(0,a.jsx)(x.Z,{children:(0,a.jsx)(m.Z,{type:"circle",percent:r,format:g("calculation")})})]})},w=r(35723),k=r(97570),N=r.n(k),y=r(39657),b=r(2811),C=r(46237),R=r(22567),_=r.n(R),I=(0,a.jsx)(c.default,{message:"\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\u3082\u3057\u304f\u306f\u8a08\u7b97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002",description:(0,a.jsx)(s.Z,{children:(0,a.jsxs)(s.Z.Text,{children:["\u6642\u9593\u304c\u7d4c\u3063\u3066\u3082\u89e3\u6c7a\u3057\u306a\u3044\u5834\u5408\u306f\u958b\u767a\u8005\u307e\u3067\u3054\u9023\u7d61\u304f\u3060\u3055\u3044\u3002",(0,a.jsx)("br",{}),"If the problem persists over time, please contact the developer."]})}),type:"error",showIcon:!0}),S=function(e){var n=e.expanded,r=e.onExpand,t=e.record;return n?(0,a.jsx)("div",{className:_().expandedCellInner,children:(0,a.jsx)(d.Z,{onClick:function(e){return r(t,e)},className:_().commonCell})}):(0,a.jsx)(l.Z,{onClick:function(e){return r(t,e)}})},Z=function(e){var n=e.columns,r=e.rowsCreator,i=e.scoreCsvPaths,c=e.onChange,s=e.onExpandedRowsChange,d=(0,p.useState)([]),l=d[0],f=d[1],x=(0,p.useState)(0),m=x[0],h=x[1],v=(0,p.useState)(0),g=v[0],k=v[1],R=(0,p.useState)(!1),Z=R[0],A=R[1],E=(0,p.useState)(!1),P=E[0],F=E[1],V=(0,w.ZP)(b.xn),O=V.data,T=V.error;(0,p.useEffect)((function(){f([]),A(!1),h(0),k(0),F(!1)}),[i]);var D=(0,w.ZP)(O?i:null,(function(){for(var e=new y.K(O),n=0,r=function(r){return fetch(r).then((function(e){return e.text()})).then((function(r){return n+=1,h(Math.round(n/i.length*100)),(0,C.MN)(r,e)})).catch((function(e){throw console.error(e),e}))},t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return N()(7,a,r)}),{}),L=D.data,B=D.error;return(0,p.useEffect)((function(){!L||m<100||Z||(A(!0),function(){var e=(0,u.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r(L,k);case 3:n=e.sent,k(100),f(n),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),F(!0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()())}),[m,L,Z,r]),T||B||P?I:(0,a.jsx)(a.Fragment,{children:0===l.length?(0,a.jsx)(j,{downloadProgress:m,calculationProgress:g}):(0,a.jsx)(t.Z,{sticky:!0,pagination:{defaultPageSize:100,position:["topRight","bottomRight"]},showSorterTooltip:!1,size:"small",dataSource:l,columns:n,className:_().table,onChange:c,expandable:{onExpandedRowsChange:s,expandIcon:S,expandIconColumnIndex:0,expandedRowRender:function(){return(0,a.jsx)(a.Fragment,{})},expandedRowClassName:function(){return _().expandedRow}}})})}},64623:function(e,n,r){"use strict";r.r(n),r.d(n,{SpHistoriesPage:function(){return b},default:function(){return C}});r(54277);var t=r(74048),a=r(85893),i=r(75517),o=r(71385),u=r(51436),c=r(17625),s=r(60329),d=r(39399),l=r(99409),f=r(47125),x=r(91492),m=r.n(x),p=function(e,n,r){var t=function(e){return function(n,r){return function(t,i){var o=e.current.includes(i.key),u="function"===typeof r?r(i):r,c=n(i);return{children:o?(0,a.jsx)("div",{className:m().expandedCellInner,children:(0,a.jsx)("div",{className:m().commonCell,children:c})}):c,props:u}}}}(e),i=function(e){return function(n,r){return function(r,t){return e.current.includes(t.key)?{children:(0,a.jsx)("div",{children:(0,o.Z)(t.childRows||[]).map((function(e){var r,i,o=(null===(r=e.playVersion)||void 0===r?void 0:r.num)===(null===(i=t.topPlayVersion)||void 0===i?void 0:i.num),u=n(e);return(0,a.jsx)("div",{className:o?m().top:m().histories,id:e.key,children:void 0===u?"-":u},e.key)}))}),props:{className:m().expandedIndividualCell}}:n(t)}}}(e),x=[{dataIndex:"version",title:"ver",defaultSortOrder:"descend",sorter:(0,l.R)((function(e){return e.version.num})),render:t((function(e){return e.version.shortName})),className:m().version,width:"7em"},{dataIndex:"title",title:"title",sorter:(0,l.R)((function(e){return e.title})),render:t((function(e){return e.title})),defaultSortOrder:"ascend",width:"13em",onFilter:function(e,n){return n.title.toLowerCase().includes(e.toString().toLowerCase())},filteredValue:n,className:m().title},{dataIndex:"difficulty",title:"dif",filters:[{text:"Beginner",value:"B"},{text:"Normal",value:"N"},{text:"Hyper",value:"H"},{text:"Another",value:"A"},{text:"Leggendaria",value:"L"}],onFilter:function(e,n){return n.difficulty.shortName===e},sorter:function(e,n){return(0,s.E)(e.difficulty.num,n.difficulty.num)},render:t((function(e){return e.difficulty.shortName}),(function(e){return{className:m()[e.difficulty.name]}})),width:"3em",className:m().difficulty},{dataIndex:"level",title:"Lv",filters:Array.from(new Array(12),(function(e,n){return n+1})).map((function(e){return{text:"\u2606".concat(e),value:e}})).reverse(),onFilter:function(e,n){return n.level===e},sorter:(0,l.R)((function(e){return e.level})),render:t((function(e){return e.level})),className:m().level,width:"3em"},{dataIndex:"notes",title:"notes",sorter:(0,l.R)((function(e){return e.notes})),render:t((function(e){return e.notes})),className:m().notes,width:"4em"},{dataIndex:"rank",title:"rank",filters:[{text:"AAA",value:"AAA"},{text:"MAX",value:"MAX"}],onFilter:function(e,n){return n.rank.rank===e},sorter:(0,l.R)((function(e){return e.rank.num})),render:i((function(e){return e.rank.rank})),className:m().rank,width:"5em"},{dataIndex:"score",title:"score",sorter:(0,l.R)((function(e){return e.score})),render:i((function(e){return e.score})),className:m().score,width:"3em"},{dataIndex:"rate",title:"rate",filters:Array.from(new Array(9),(function(e,n){return n})).map((function(e){var n=92+e;return{value:n,text:"".concat(n,"%")}})),onFilter:function(e,n){return n.rate.percentFloor==e},sorter:(0,l.R)((function(e){return e.rate.rate})),render:i((function(e){if(void 0===e.rate.rate)return(0,a.jsx)(a.Fragment,{children:"\xa0"});var n=e.rate.rate;return(0,a.jsx)("div",{className:m().rateBarContainer,children:n>0&&(0,a.jsxs)("div",{className:m().rateBar,style:{width:"".concat(100*n,"%")},children:[e.rate.percent,"%"]})})})),className:m().rate,width:"9em"},{title:"around",children:[{dataIndex:"aroundRank",title:"rank",sorter:(0,l.R)((function(e){return e.rank.around.num})),render:i((function(e){return e.rank.around.rank})),width:"3em",className:m().rank},{dataIndex:"aroundRankDiff",title:"diff",sorter:(0,l.R)((function(e){return e.rank.around.diff})),render:i((function(e){return(0,f.S2)(e.rank.around.diff)})),className:m().diff,width:"4em"}]},{dataIndex:"playVersion",title:(0,a.jsxs)("span",{children:["play",(0,a.jsx)("br",{}),"ver"]}),sorter:(0,l.R)((function(e){return e.playVersion.num})),render:i((function(e){return e.playVersion.shortName})),className:m().playVersion,width:"4em"},{dataIndex:"no",title:"No",render:i((function(e){return e.aggregate?0===e.aggregate.ranking?(0,a.jsx)(c.G,{icon:u.kWN}):e.aggregate.ranking:(0,a.jsx)(a.Fragment,{children:"\xa0"})})),className:m().prefecture,width:"3em"},{dataIndex:"prefecture",title:(0,a.jsxs)("div",{children:["prefe-",(0,a.jsx)("br",{}),"cture"]}),filters:d.v_.slice(1).map((function(e){return{value:e,text:e}})),onFilter:function(e,n){return n.prefecture.name==e},sorter:(0,l.R)((function(e){return e.prefecture.num})),render:i((function(e){return e.prefecture.name})),className:m().prefecture,width:"5em"},{dataIndex:"djName",title:"name",sorter:(0,l.R)((function(e){return e.djName})),render:i((function(e){return e.djName})),className:m().prefecture,width:"5em"},{dataIndex:"topDiff",title:(0,a.jsxs)("span",{children:["top",(0,a.jsx)("br",{}),"diff"]}),render:i((function(e){return e.aggregate?(0,f.S2)(e.aggregate.diff.top):(0,a.jsx)(a.Fragment,{children:"\xa0"})})),className:m().topDiff,width:"4em"},{title:"next",children:[{dataIndex:"nextRank",title:"rank",sorter:(0,l.R)((function(e){return e.rank.next.num})),render:i((function(e){return e.rank.next.rank})),width:"3em",className:m().rank},{dataIndex:"nextRankDiff",title:"diff",sorter:(0,l.R)((function(e){return e.rank.next.diff})),render:i((function(e){return(0,f.S2)(e.rank.next.diff)})),className:m().diff,width:"4em"}]},{title:"prev",children:[{dataIndex:"prevRank",title:"rank",sorter:(0,l.R)((function(e){return e.rank.prev.num})),render:i((function(e){return e.rank.prev.rank})),width:"3em",className:m().rank},{dataIndex:"prevRankDiff",title:"diff",sorter:(0,l.R)((function(e){return e.rank.prev.diff})),render:i((function(e){return(0,f.S2)(e.rank.prev.diff)})),className:m().diff,width:"4em"}]}];return Object.keys(r).forEach((function(e){var n=x.find((function(n){return n.dataIndex===e}));null!==n&&void 0!==n&&n.filteredValue||(n.filteredValue=r[e])})),x},h=r(74897),v=r(67294),g=r(2811),j=r(74462),w={difficulty:["A","L"]},k=function(e){var n=e.searchKeyword,r=(e.version,e.prefecture),t=(0,v.useRef)([]),i=(0,v.useState)(w),o=i[0],u=i[1],c=(0,v.useMemo)((function(){return p(t,[n],o)}),[t,n,o]),s=(0,v.useMemo)((function(){return r?(0,d.Ft)(r).reverse().map((function(e){return(0,g.AT)(e.num,j.mF.toShortVersion(e.name),Number(r),d.v_[Number(r)])})):[]}),[r]);return(0,a.jsx)(h.z,{columns:c,rowsCreator:f.OA,scoreCsvPaths:s,onChange:function(e,n,r,t){"filter"===t.action&&u(n)},onExpandedRowsChange:function(e){t.current=e}})},N=r(10295),y=r.n(N),b=function(){var e=(0,v.useState)(""),n=e[0],r=e[1],o=(0,v.useState)(""),u=o[0],c=o[1],s=(0,v.useState)(""),d=s[0],l=s[1];return(0,a.jsxs)(t.default,{direction:"vertical",className:y().container,children:[(0,a.jsx)(i.Z,{onKeywordChange:function(e){r(e)},onPrefectureChange:function(e){c(e)},onVersionChange:function(e){l(e)},enableAllPrefecture:!1}),(0,a.jsx)(k,{searchKeyword:n,version:d,prefecture:u})]})},C=b},60329:function(e,n,r){"use strict";r.d(n,{E:function(){return t}});var t=function(e,n){return e>n?1:e<n?-1:0}},99409:function(e,n,r){"use strict";r.d(n,{R:function(){return a}});var t=r(60329),a=function(e){return function(n,r){return(0,t.E)(e(n),e(r))}}},73840:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sp/histories",function(){return r(64623)}])},32107:function(e){e.exports={prefectureSelect:"_39d96bb8",versionSelect:"e6613ee6"}},22567:function(e){e.exports={table:"_2e1dc672",expandedRow:"d8f9635f",commonCell:"_4ea7f06b",expandedCellInner:"f700ad4d"}},42108:function(e){e.exports={progressTitle:"c35abfb6"}},91492:function(e){e.exports={normal:"d4191afd",hyper:"a7a401c5",another:"_2b9d8d51",leggendaria:"_4738b041",beginner:"a2612e58",title:"_6bbb723e",score:"_4cf4fb6c",rate:"e5aac5cc",rateBarContainer:"a427a9d6",rateBar:"ed5dd6d8",notes:"_98aecf82",level:"_0d6c8423",difficulty:"_382722b5",rank:"_78e206c9",expand:"_6459ca01",version:"ec388292",diff:"_8c7831cd",prefecture:"_24cec56b",playVersion:"_59b0d8e0",topDiff:"f58475b9",commonCell:"_04331084",expandedCellInner:"_699fe9f3",top:"_7f754c06",histories:"_164cc355",expandedIndividualCell:"ade6b028"}},10295:function(e){e.exports={container:"_3e13b34d"}}},function(e){e.O(0,[67,680,566,281,774,888,179],(function(){return n=73840,e(e.s=n);var n}));var n=e.O();_N_E=n}]);